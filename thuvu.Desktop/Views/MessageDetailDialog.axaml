<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        x:Class="thuvu.Desktop.Views.MessageDetailDialog"
        Title="Message Detail"
        Width="700" Height="500"
        WindowStartupLocation="CenterOwner"
        CanResize="True">

    <DockPanel Margin="12">
        <!-- Header -->
        <DockPanel DockPanel.Dock="Top" Margin="0,0,0,8">
            <TextBlock DockPanel.Dock="Left" Name="RoleText" FontWeight="Bold" FontSize="14"
                       VerticalAlignment="Center" />
            <TextBlock DockPanel.Dock="Right" Name="TimestampText" FontSize="11" Foreground="Gray"
                       HorizontalAlignment="Right" VerticalAlignment="Center" />
            <Panel />
        </DockPanel>

        <!-- Tool info (if present) -->
        <Border DockPanel.Dock="Top" Name="ToolPanel" IsVisible="False"
                Background="#15FF8800" CornerRadius="4" Padding="8" Margin="0,0,0,8">
            <StackPanel Spacing="4">
                <TextBlock Name="ToolNameText" FontWeight="SemiBold" FontSize="12" />
                <TextBlock Text="Arguments:" FontSize="11" Foreground="Gray" />
                <TextBox Name="ToolArgsText" IsReadOnly="True" MaxHeight="100"
                         FontFamily="Cascadia Code, Consolas" FontSize="11"
                         TextWrapping="Wrap" AcceptsReturn="True" />
                <TextBlock Text="Result:" FontSize="11" Foreground="Gray" />
                <TextBox Name="ToolResultText" IsReadOnly="True" MaxHeight="150"
                         FontFamily="Cascadia Code, Consolas" FontSize="11"
                         TextWrapping="Wrap" AcceptsReturn="True" />
            </StackPanel>
        </Border>

        <!-- Thinking content (if present) -->
        <Border DockPanel.Dock="Top" Name="ThinkingPanel" IsVisible="False"
                Background="#15808080" CornerRadius="4" Padding="8" Margin="0,0,0,8">
            <StackPanel Spacing="4">
                <TextBlock Text="ðŸ’­ Thinking" FontWeight="SemiBold" FontSize="12" />
                <TextBox Name="ThinkingText" IsReadOnly="True" MaxHeight="150"
                         FontFamily="Cascadia Code, Consolas" FontSize="11"
                         TextWrapping="Wrap" AcceptsReturn="True" FontStyle="Italic" />
            </StackPanel>
        </Border>

        <!-- Footer buttons -->
        <StackPanel DockPanel.Dock="Bottom" Orientation="Horizontal" Spacing="8"
                    HorizontalAlignment="Right" Margin="0,8,0,0">
            <Button Content="Copy to Clipboard" Click="OnCopy" Padding="12,6" />
            <Button Content="Close" Click="OnClose" Padding="12,6" />
        </StackPanel>

        <!-- Main content -->
        <TextBox Name="ContentText" IsReadOnly="True"
                 FontFamily="Cascadia Code, Consolas" FontSize="12"
                 TextWrapping="Wrap" AcceptsReturn="True"
                 VerticalAlignment="Stretch" />
    </DockPanel>
</Window>
